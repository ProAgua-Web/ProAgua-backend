{% extends 'privado/base.html' %}
{% load static %}

{% block stylesheets %}
<link rel="stylesheet" href="{% static 'stylesheets/privado/pontos_coletas.css' %}">
{% endblock %}

{% block content %}
<h1 id="titulo">Pontos de Coleta</h1>

<div>
    <input id="search-bar" name="ponto_coleta" type="text" />
    <select>
        <option>Campus</option>
        <option>Leste</option>
        <option>Oeste</option>
    </select>
    <select>
        <option>Edificação</option>
        <option>p1</option>
        <option>p2</option>
        <option>p3</option>
        <option>p4</option>
    </select>
</div>

<div class="content">
    <div id="board">
        {% for ponto in pontos_coletas %}
            <div class="card">
                <p class="codigo">{{ ponto.edificacao.codigo }}</p>
                <h2 class="nome-edif">{{ ponto.edificacao.nome }}</h2>
                <p class="ambiente">{{ ponto.ambiente}}</p>
                {%if ponto.torneira %}
                <p>Torneira</p>
                {% else %}
                <p>Bebedouro</p>
                {% endif %}
                <a href="/ponto_coleta/{{ponto.id}}/" class="button"><i class="bi bi-eye"></i> Detalhes</a>
            </div>
        {% endfor %}
        <div class="card add-card" onclick="openDialog('create-ponto-coleta-dialog')">
            <i class="bi bi-plus-lg"></i>
        </div>
    </div>
</div>

<div id="dialog-backdrop" hidden="true">
    <div id="create-ponto-coleta-dialog" class="dialog" hidden="true">
        <h1>Criar ponto de coleta </h1>
        <i id="close-bt" class="bi bi-x" onclick="closeDialog('create-ponto-coleta-dialog')"></i>
        <form method="post">
            {% csrf_token %}
            {{ create_ponto_coleta_form }}
            <input type="submit" value="Adicionar">
        </form>
        
    </div>
</div>

<script>
    const backdrop = document.getElementById('dialog-backdrop')

    function closeDialog(element_id) {
        document.getElementById(element_id).hidden = true;
        backdrop.hidden = true;
    }

    function openDialog(element_id) {
        document.getElementById(element_id).hidden = false;
        backdrop.hidden = false;
    }

</script>
{% endblock %}